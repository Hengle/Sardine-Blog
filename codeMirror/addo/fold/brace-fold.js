(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.registerHelper("fold","brace",function(Q,S){var N=S.line,C=Q.getLine(N);var B,O;function H(U){for(var V=S.ch,W=0;;){var T=V<=0?-1:C.lastIndexOf(U,V-1);if(T==-1){if(W==1){break}W=1;V=C.length;continue}if(W==1&&T<S.ch){break}O=Q.getTokenTypeAt(A.Pos(N,T+1));if(!/^(comment|string)/.test(O)){return T+1}V=T-1}}var L="{",J="}",B=H("{");if(B==null){L="[",J="]";B=H("[")}if(B==null){return}var D=1,M=Q.lastLine(),I,F;outer:for(var E=N;E<=M;++E){var K=Q.getLine(E),R=E==N?B:0;for(;;){var P=K.indexOf(L,R),G=K.indexOf(J,R);if(P<0){P=K.length}if(G<0){G=K.length}R=Math.min(P,G);if(R==K.length){break}if(Q.getTokenTypeAt(A.Pos(E,R+1))==O){if(R==P){++D}else{if(!--D){I=E;F=R;break outer}}}++R}}if(I==null||N==I&&F==B){return}return{from:A.Pos(N,B),to:A.Pos(I,F)}});A.registerHelper("fold","import",function(G,H){function E(M){if(M<G.firstLine()||M>G.lastLine()){return null}var N=G.getTokenAt(A.Pos(M,1));if(!/\S/.test(N.string)){N=G.getTokenAt(A.Pos(M,N.end+1))}if(N.type!="keyword"||N.string!="import"){return null}for(var I=M,J=Math.min(G.lastLine(),M+10);I<=J;++I){var L=G.getLine(I),K=L.indexOf(";");if(K!=-1){return{startCh:N.end,end:A.Pos(I,K)}}}}var H=H.line,B=E(H),C;if(!B||E(H-1)||((C=E(H-2))&&C.end.line==H-1)){return null}for(var F=B.end;;){var D=E(F.line+1);if(D==null){break}F=D.end}return{from:G.clipPos(A.Pos(H,B.startCh+1)),to:F}});A.registerHelper("fold","include",function(F,G){function C(H){if(H<F.firstLine()||H>F.lastLine()){return null}var I=F.getTokenAt(A.Pos(H,1));if(!/\S/.test(I.string)){I=F.getTokenAt(A.Pos(H,I.end+1))}if(I.type=="meta"&&I.string.slice(0,8)=="#include"){return I.start+8}}var G=G.line,D=C(G);if(D==null||C(G-1)!=null){return null}for(var E=G;;){var B=C(E+1);if(B==null){break}++E}return{from:A.Pos(G,D+1),to:F.clipPos(A.Pos(E))}})});