(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.defineMode("tiddlywiki",function(){var E={};var B=function(){function Y(Z){return{type:Z,style:"macro"}}return{"allTags":Y("allTags"),"closeAll":Y("closeAll"),"list":Y("list"),"newJournal":Y("newJournal"),"newTiddler":Y("newTiddler"),"permaview":Y("permaview"),"saveChanges":Y("saveChanges"),"search":Y("search"),"slider":Y("slider"),"tabs":Y("tabs"),"tag":Y("tag"),"tagging":Y("tagging"),"tags":Y("tags"),"tiddler":Y("tiddler"),"timeline":Y("timeline"),"today":Y("today"),"version":Y("version"),"option":Y("option"),"with":Y("with"),"filter":Y("filter")}}();var H=/[\w_\-]/i,L=/^\-\-\-\-+$/,V=/^\/\*\*\*$/,P=/^\*\*\*\/$/,S=/^<<<$/,R=/^\/\/\{\{\{$/,X=/^\/\/\}\}\}$/,Q=/^<!--\{\{\{-->$/,K=/^<!--\}\}\}-->$/,U=/^\{\{\{$/,T=/^\}\}\}$/,O=/.*?\}\}\}/;function C(a,Z,Y){Z.tokenize=Y;return Y(a,Z)}function M(d,b){var Z=d.sol(),a;b.block=false;a=d.peek();if(Z&&/[<\/\*{}\-]/.test(a)){if(d.match(U)){b.block=true;return C(d,b,J)}if(d.match(S)){return"quote"}if(d.match(V)||d.match(P)){return"comment"}if(d.match(R)||d.match(X)||d.match(Q)||d.match(K)){return"comment"}if(d.match(L)){return"hr"}}a=d.next();if(Z&&/[\/\*!#;:>|]/.test(a)){if(a=="!"){d.skipToEnd();return"header"}if(a=="*"){d.eatWhile("*");return"comment"}if(a=="#"){d.eatWhile("#");return"comment"}if(a==";"){d.eatWhile(";");return"comment"}if(a==":"){d.eatWhile(":");return"comment"}if(a==">"){d.eatWhile(">");return"quote"}if(a=="|"){return"header"}}if(a=="{"&&d.match(/\{\{/)){return C(d,b,J)}if(/[hf]/i.test(a)){if(/[ti]/i.test(d.peek())&&d.match(/\b(ttps?|tp|ile):\/\/[\-A-Z0-9+&@#\/%?=~_|$!:,.;]*[A-Z0-9+&@#\/%=~_|$]/i)){return"link"}}if(a=='"'){return"string"}if(a=="~"){return"brace"}if(/[\[\]]/.test(a)){if(d.peek()==a){d.next();return"brace"}}if(a=="@"){d.eatWhile(H);return"link"}if(/\d/.test(a)){d.eatWhile(/\d/);return"number"}if(a=="/"){if(d.eat("%")){return C(d,b,I)}else{if(d.eat("/")){return C(d,b,N)}}}if(a=="_"){if(d.eat("_")){return C(d,b,D)}}if(a=="-"){if(d.eat("-")){if(d.peek()!=" "){return C(d,b,F)}if(d.peek()==" "){return"brace"}}}if(a=="'"){if(d.eat("'")){return C(d,b,W)}}if(a=="<"){if(d.eat("<")){return C(d,b,G)}}else{return null}d.eatWhile(/[\w\$_]/);var c=d.current(),Y=E.propertyIsEnumerable(c)&&E[c];return Y?Y.style:null}function I(b,Z){var a=false,Y;while(Y=b.next()){if(Y=="/"&&a){Z.tokenize=M;break}a=(Y=="%")}return"comment"}function W(b,Z){var a=false,Y;while(Y=b.next()){if(Y=="'"&&a){Z.tokenize=M;break}a=(Y=="'")}return"strong"}function J(a,Z){var Y=Z.block;if(Y&&a.current()){return"comment"}if(!Y&&a.match(O)){Z.tokenize=M;return"comment"}if(Y&&a.sol()&&a.match(T)){Z.tokenize=M;return"comment"}a.next();return"comment"}function N(b,Z){var a=false,Y;while(Y=b.next()){if(Y=="/"&&a){Z.tokenize=M;break}a=(Y=="/")}return"em"}function D(b,Z){var a=false,Y;while(Y=b.next()){if(Y=="_"&&a){Z.tokenize=M;break}a=(Y=="_")}return"underlined"}function F(b,Z){var a=false,Y;while(Y=b.next()){if(Y=="-"&&a){Z.tokenize=M;break}a=(Y=="-")}return"strikethrough"}function G(c,a){var Z,b,Y;if(c.current()=="<<"){return"macro"}Z=c.next();if(!Z){a.tokenize=M;return null}if(Z==">"){if(c.peek()==">"){c.next();a.tokenize=M;return"macro"}}c.eatWhile(/[\w\$_]/);b=c.current();Y=B.propertyIsEnumerable(b)&&B[b];if(Y){return Y.style,b}else{return null,b}}return{startState:function(){return{tokenize:M,indented:0,level:0}},token:function(a,Z){if(a.eatSpace()){return null}var Y=Z.tokenize(a,Z);return Y},electricChars:""}});A.defineMIME("text/x-tiddlywiki","tiddlywiki")});