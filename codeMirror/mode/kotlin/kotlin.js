(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.defineMode("kotlin",function(Q,C){function B(W){var V={},T=W.split(" ");for(var U=0;U<T.length;++U){V[T[U]]=true}return V}var D=C.multiLineStrings;var R=B("package continue return object while break class data trait interface throw super when type this else This try val var fun for is in if do as true false null get set");var M=B("import where by get set abstract enum open annotation override private public internal protected catch out vararg inline finally final ref");var N=B("catch class do else finally for if where try while enum");var I=B("null true false this");var O;function F(W,V){var U=W.next();if(U=='"'||U=="'"){return G(U,W,V)}if(U=="."&&W.eat("*")){return"word"}if(/[\[\]{}\(\),;\:\.]/.test(U)){O=U;return null}if(/\d/.test(U)){if(W.eat(/eE/)){W.eat(/\+\-/);W.eatWhile(/\d/)}return"number"}if(U=="/"){if(W.eat("*")){V.tokenize.push(J);return J(W,V)}if(W.eat("/")){W.skipToEnd();return"comment"}if(S(V.lastToken)){return G(U,W,V)}}if(U=="-"&&W.eat(">")){O="->";return null}if(/[\-+*&%=<>!?|\/~]/.test(U)){W.eatWhile(/[\-+*&%=<>|~]/);return"operator"}W.eatWhile(/[\w\$_]/);var T=W.current();if(I.propertyIsEnumerable(T)){return"atom"}if(M.propertyIsEnumerable(T)){if(N.propertyIsEnumerable(T)){O="newstatement"}return"softKeyword"}if(R.propertyIsEnumerable(T)){if(N.propertyIsEnumerable(T)){O="newstatement"}return"keyword"}return"word"}F.isBase=true;function G(T,X,U){var V=false;if(T!="/"&&X.eat(T)){if(X.eat(T)){V=true}else{return"string"}}function W(c,a){var Z=false,b,Y=!V;while((b=c.next())!=null){if(b==T&&!Z){if(!V){break}if(c.match(T+T)){Y=true;break}}if(T=='"'&&b=="$"&&!Z&&c.eat("{")){a.tokenize.push(K());return"string"}if(b=="$"&&!Z&&!c.eat(" ")){a.tokenize.push(H());return"string"}Z=!Z&&b=="\\"}if(D){a.tokenize.push(W)}if(Y){a.tokenize.pop()}return"string"}U.tokenize.push(W);return W(X,U)}function K(){var T=1;function U(W,V){if(W.peek()=="}"){T--;if(T==0){V.tokenize.pop();return V.tokenize[V.tokenize.length-1](W,V)}}else{if(W.peek()=="{"){T++}}return F(W,V)}U.isBase=true;return U}function H(){function T(W,V){if(W.eat(/[\w]/)){var U=W.eatWhile(/[\w]/);if(U){V.tokenize.pop();return"word"}}V.tokenize.pop();return"string"}T.isBase=true;return T}function J(W,U){var V=false,T;while(T=W.next()){if(T=="/"&&V){U.tokenize.pop();break}V=(T=="*")}return"comment"}function S(T){return !T||T=="operator"||T=="->"||/[\.\[\{\(,;:]/.test(T)||T=="newstatement"||T=="keyword"||T=="proplabel"}function E(X,W,T,V,U){this.indented=X;this.column=W;this.type=T;this.align=V;this.prev=U}function P(V,U,T){return V.context=new E(V.indented,U,T,null,V.context)}function L(U){var T=U.context.type;if(T==")"||T=="]"||T=="}"){U.indented=U.context.indented}return U.context=U.context.prev}return{startState:function(T){return{tokenize:[F],context:new E((T||0)-Q.indentUnit,0,"top",false),indented:0,startOfLine:true,lastToken:null}},token:function(W,U){var V=U.context;if(W.sol()){if(V.align==null){V.align=false}U.indented=W.indentation();U.startOfLine=true;if(V.type=="statement"&&!S(U.lastToken)){L(U);V=U.context}}if(W.eatSpace()){return null}O=null;var T=U.tokenize[U.tokenize.length-1](W,U);if(T=="comment"){return T}if(V.align==null){V.align=true}if((O==";"||O==":")&&V.type=="statement"){L(U)}else{if(O=="->"&&V.type=="statement"&&V.prev.type=="}"){L(U);U.context.align=false}else{if(O=="{"){P(U,W.column(),"}")}else{if(O=="["){P(U,W.column(),"]")}else{if(O=="("){P(U,W.column(),")")}else{if(O=="}"){while(V.type=="statement"){V=L(U)}if(V.type=="}"){V=L(U)}while(V.type=="statement"){V=L(U)}}else{if(O==V.type){L(U)}else{if(V.type=="}"||V.type=="top"||(V.type=="statement"&&O=="newstatement")){P(U,W.column(),"statement")}}}}}}}}U.startOfLine=false;U.lastToken=O||T;return T},indent:function(X,U){if(!X.tokenize[X.tokenize.length-1].isBase){return 0}var W=U&&U.charAt(0),T=X.context;if(T.type=="statement"&&!S(X.lastToken)){T=T.prev}var V=W==T.type;if(T.type=="statement"){return T.indented+(W=="{"?0:Q.indentUnit)}else{if(T.align){return T.column+(V?0:1)}else{return T.indented+(V?0:Q.indentUnit)}}},closeBrackets:{triples:"'\""},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});A.defineMIME("text/x-kotlin","kotlin")});