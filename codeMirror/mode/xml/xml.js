(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.defineMode("xml",function(B,X){var P=B.indentUnit;var Q=X.multilineTagIndentFactor||1;var T=X.multilineTagIndentPastTag;if(T==null){T=true}var J=X.htmlMode?{autoSelfClosers:{"area":true,"base":true,"br":true,"col":true,"command":true,"embed":true,"frame":true,"hr":true,"img":true,"input":true,"keygen":true,"link":true,"meta":true,"param":true,"source":true,"track":true,"wbr":true,"menuitem":true},implicitlyClosed:{"dd":true,"li":true,"optgroup":true,"option":true,"p":true,"rp":true,"rt":true,"tbody":true,"td":true,"tfoot":true,"th":true,"tr":true},contextGrabbers:{"dd":{"dd":true,"dt":true},"dt":{"dd":true,"dt":true},"li":{"li":true},"option":{"option":true,"optgroup":true},"optgroup":{"optgroup":true},"p":{"address":true,"article":true,"aside":true,"blockquote":true,"dir":true,"div":true,"dl":true,"fieldset":true,"footer":true,"form":true,"h1":true,"h2":true,"h3":true,"h4":true,"h5":true,"h6":true,"header":true,"hgroup":true,"hr":true,"menu":true,"nav":true,"ol":true,"p":true,"pre":true,"section":true,"table":true,"ul":true},"rp":{"rp":true,"rt":true},"rt":{"rp":true,"rt":true},"tbody":{"tbody":true,"tfoot":true},"td":{"td":true,"th":true},"tfoot":{"tbody":true},"th":{"td":true,"th":true},"thead":{"tbody":true,"tfoot":true},"tr":{"tr":true}},doNotIndent:{"pre":true},allowUnquoted:true,allowMissing:true,caseFold:true}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false,caseFold:false};var R=X.alignCDATA;var Z,O;function D(f,e){function c(g){e.tokenize=g;return g(f,e)}var d=f.next();if(d=="<"){if(f.eat("!")){if(f.eat("[")){if(f.match("CDATA[")){return c(G("atom","]]>"))}else{return null}}else{if(f.match("--")){return c(G("comment","-->"))}else{if(f.match("DOCTYPE",true,true)){f.eatWhile(/[\w\._\-]/);return c(W(1))}else{return null}}}}else{if(f.eat("?")){f.eatWhile(/[\w\._\-]/);e.tokenize=G("meta","?>");return"meta"}else{Z=f.eat("/")?"closeTag":"openTag";e.tokenize=L;return"tag bracket"}}}else{if(d=="&"){var b;if(f.eat("#")){if(f.eat("x")){b=f.eatWhile(/[a-fA-F\d]/)&&f.eat(";")}else{b=f.eatWhile(/[\d]/)&&f.eat(";")}}else{b=f.eatWhile(/[\w\.\-:]/)&&f.eat(";")}return b?"atom":"error"}else{f.eatWhile(/[^&<]/);return null}}}D.isInText=true;function L(e,d){var c=e.next();if(c==">"||(c=="/"&&e.eat(">"))){d.tokenize=D;Z=c==">"?"endTag":"selfcloseTag";return"tag bracket"}else{if(c=="="){Z="equals";return null}else{if(c=="<"){d.tokenize=D;d.state=M;d.tagName=d.tagStart=null;var b=d.tokenize(e,d);return b?b+" tag error":"tag error"}else{if(/[\'\"]/.test(c)){d.tokenize=S(c);d.stringStartCol=e.column();return d.tokenize(e,d)}else{e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}}}}}function S(b){var c=function(e,d){while(!e.eol()){if(e.next()==b){d.tokenize=L;break}}return"string"};c.isInAttribute=true;return c}function G(c,b){return function(e,d){while(!e.eol()){if(e.match(b)){d.tokenize=D;break}e.next()}return c}}function W(b){return function(e,d){var c;while((c=e.next())!=null){if(c=="<"){d.tokenize=W(b+1);return d.tokenize(e,d)}else{if(c==">"){if(b==1){d.tokenize=D;break}else{d.tokenize=W(b-1);return d.tokenize(e,d)}}}}return"meta"}}function H(d,b,c){this.prev=d.context;this.tagName=b;this.indent=d.indented;this.startOfLine=c;if(J.doNotIndent.hasOwnProperty(b)||(d.context&&d.context.noIndent)){this.noIndent=true}}function U(b){if(b.context){b.context=b.context.prev}}function F(d,c){var b;while(true){if(!d.context){return}b=d.context.tagName;if(!J.contextGrabbers.hasOwnProperty(b)||!J.contextGrabbers[b].hasOwnProperty(c)){return}U(d)}}function M(b,d,c){if(b=="openTag"){c.tagStart=d.column();return N}else{if(b=="closeTag"){return C}else{return M}}}function N(b,d,c){if(b=="word"){c.tagName=d.current();O="tag";return K}else{O="error";return N}}function C(b,e,d){if(b=="word"){var c=e.current();if(d.context&&d.context.tagName!=c&&J.implicitlyClosed.hasOwnProperty(d.context.tagName)){U(d)}if(d.context&&d.context.tagName==c){O="tag";return Y}else{O="tag error";return E}}else{O="error";return E}}function Y(b,c,d){if(b!="endTag"){O="error";return Y}U(d);return M}function E(b,d,c){O="error";return Y(b,d,c)}function K(b,e,f){if(b=="word"){O="attribute";return a}else{if(b=="endTag"||b=="selfcloseTag"){var c=f.tagName,d=f.tagStart;f.tagName=f.tagStart=null;if(b=="selfcloseTag"||J.autoSelfClosers.hasOwnProperty(c)){F(f,c)}else{F(f,c);f.context=new H(f,c,d==f.indented)}return M}}O="error";return K}function a(b,d,c){if(b=="equals"){return I}if(!J.allowMissing){O="error"}return K(b,d,c)}function I(b,d,c){if(b=="string"){return V}if(b=="word"&&J.allowUnquoted){O="string";return K}O="error";return K(b,d,c)}function V(b,d,c){if(b=="string"){return V}return K(b,d,c)}return{startState:function(){return{tokenize:D,state:M,indented:0,tagName:null,tagStart:null,context:null}},token:function(d,c){if(!c.tagName&&d.sol()){c.indented=d.indentation()}if(d.eatSpace()){return null}Z=null;var b=c.tokenize(d,c);if((b||Z)&&b!="comment"){O=null;c.state=c.state(Z||b,d,c);if(O){b=O=="error"?b+" error":O}}return b},indent:function(g,d,e){var c=g.context;if(g.tokenize.isInAttribute){if(g.tagStart==g.indented){return g.stringStartCol+1}else{return g.indented+P}}if(c&&c.noIndent){return A.Pass}if(g.tokenize!=L&&g.tokenize!=D){return e?e.match(/^(\s*)/)[0].length:0}if(g.tagName){if(T){return g.tagStart+g.tagName.length+2}else{return g.tagStart+P*Q}}if(R&&/<!\[CDATA\[/.test(d)){return 0}var b=d&&/^<(\/)?([\w_:\.-]*)/.exec(d);if(b&&b[1]){while(c){if(c.tagName==b[2]){c=c.prev;break}else{if(J.implicitlyClosed.hasOwnProperty(c.tagName)){c=c.prev}else{break}}}}else{if(b){while(c){var f=J.contextGrabbers[c.tagName];if(f&&f.hasOwnProperty(b[2])){c=c.prev}else{break}}}}while(c&&!c.startOfLine){c=c.prev}if(c){return c.indent+P}else{return 0}},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:X.htmlMode?"html":"xml",helperType:X.htmlMode?"html":"xml"}});A.defineMIME("text/xml","xml");A.defineMIME("application/xml","xml");if(!A.mimeModes.hasOwnProperty("text/html")){A.defineMIME("text/html",{name:"xml",htmlMode:true})}});